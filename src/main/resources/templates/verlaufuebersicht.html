<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<header th:insert="fragments/general.html :: head(title='WillAgropastoral-Appercu de Finances')"></header>
<body>
<div class="container-fluid background">
    <header th:replace="fragments/general.html :: indexheader"></header>
    <div class="container">
        <h1>Rapport journalier pour le projects <span th:text="${projectName}">Nom du Project</span></h1>
        <h3>(Brief Rapport de production et de consommation)</h3>

        <div class="newfinance transbox">
            <form th:object="${verlaufForm}" method="post" th:action="@{/leaderindex/__${projectName.toLowerCase()}__}">
                <div class="form-group">
                    <h3> Ajoutez les Resultats de ce jours</h3>
                    <div th:insert="fragments/general.html :: inputfield(field='production', name='Production')"></div>
                    <div th:insert="fragments/general.html :: inputfield(field='consommation', name='Consommation')"></div>
                    <div th:insert="fragments/general.html :: textinput(field='appreciation', name='Appreciation journaliere', placeholder='Brieve Appreciation générale de la journée')"></div>

                    <div class="form-group row">
                        <label class="col-sm-2 col-form-label" for="projectName"></label>
                        <div class="col-sm-10">
                            <input type="hidden" class="form-control is-valid" required
                                   placeholder="Nom du project"
                                   name="projectName" id="projectName"
                                   th:field="*{projectName}">
                        </div>
                    </div>
                </div>
                <div class="ui-button">
                    <input class="btn btn-primary" type="submit" value="Ajouter"> <br><br>
                </div>
            </form>
        </div>


        <div class="transbox">
            <h3>Activité journalière</h3>
            <table class="table table-hover" th:object="${verlaeufe}">
                <thead>
                <tr>
                    <th scope="col">Date</th>
                    <th scope="col">Consommation</th>
                    <th scope="col">Production</th>
                    <th scope="col">Appreciation</th>
                    <th scope="col">Modification</th>
                    <th scope="col">Supression</th>
                </tr>
                </thead>
                <tbody th:remove="all-but-first">
                <tr th:each="verlauf: ${verlaeufe}" th:object="${verlauf}">
                    <td th:text="*{getDateTime().toLocalDate()}">Consommation</td>
                    <td th:text="*{getConsommation()}">Consommation</td>
                    <td th:text="*{getProduction()}">Productionn</td>
                    <td th:text="*{getAppreciation()}">Commentaire</td>
                    <td th:if="${verlauf.getDateTime().toLocalDate().toString()} == __${now}__ or ${#request.userPrincipal.principal.role.toString()} == 'ROLE_ADMIN'">
                        <form method="get" th:action="@{/leaderindex/pondeuses/modifier/{id}(id=*{getId()})}">
                            <input class="btn btn-outline-primary btn-sm fa fa-trash" type="submit" value="Modifier">
                        </form>
                    </td>
                    <td th:if="${verlauf.getDateTime().toLocalDate().toString()} == __${now}__ or ${#request.userPrincipal.principal.role.toString()} == 'ROLE_ADMIN'">
                        <form method="post" th:action="@{/leaderindex/pondeuses/delete/{id}(id=*{getId()})}">
                            <input class="btn btn-outline-danger btn-sm fa fa-trash" type="submit" value="Suprimer">
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="transbox container-fluid">
            <h3>Note: Consommation mesuré en 'Sac de 50 Kg' et production mésuré en 'alvéoles'</h3>
        </div>
        <!--form method="post" th:action="@{/finances/deleteall}">
            <input class="btn btn-outline-danger btn-sm" type="submit" value="Suprimer tout">
        </form-->
    </div>
    <footer th:replace="fragments/general.html :: footer"></footer>
</div>
</body>
<script>
    function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "navbar-expand") {
            x.className += "navbar-expand-md";
        } else {
            x.className = "navbar-expand";
        }
    }
</script>
</html>