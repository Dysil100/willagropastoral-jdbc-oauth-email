<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Willagropastoral Appercu de Finances</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" th:href="@{/css/styles.css}" type="text/css" href="../static/css/styles.css"/>
</head>
<body>
<div class="container-fluid background">
    <header th:replace="fragments/general.html :: indexheader"></header>
    <div class="container">
        <h1>Appercu de la gestion financiere <span th:if="${projectName != null}"> pour <span th:text="${projectName}">Nom du Project</span></span></h1>
        <div class="transbox">
            <h2>Le Compteur financier de la Structure s'eleve à: <span class="alert alert-success"
                                                                       th:if="${compteur.summe} > 0.0"
                                                                       th:text="${compteur.getSumme()}"><h3> la somme de </h3></span>
                <span class="alert alert-warning" th:if="${compteur.getSumme()} <= 0.0"
                      th:text="${compteur.getSumme()}"><h3>somme</h3></span> - Depuis la date du <span
                        th:text="${compteur.getStartDate()}">date de départ</span></h2>
        </div>
        <div class="newfinance transbox">
            <form th:object="${financeForm}" method="post" th:action="@{/leaderindex/financesuebersicht}">
                <div class="form-group">
                    <h3> Ajoutez une Nouvelle action financiere</h3>
                    <div th:insert="fragments/general.html :: inputfield(field='summe', name='Somme')"></div>
                    <div th:insert="fragments/general.html :: textinput(field='description', name='Description', placeholder='Description de l\'action finaciere')"></div>
                    <div th:insert="fragments/general.html :: textinput(field='projectName', name='Nom du project', placeholder='Pondeuses ou Porcins')"></div>

                </div>
                <div th:insert="fragments/general.html :: switchinput0(field='eingabe', name='Gains ?')"></div>

                <div class="ui-button">
                    <input class="btn btn-primary" type="submit" value="Ajouter"> <br><br>
                </div>
            </form>
        </div>

        <div class="transbox">
            <table class="table table-hover" th:object="${finances}">
                <thead>
                <tr>
                    <th scope="col">Type</th>
                    <th scope="col">Somme</th>
                    <th scope="col">Description</th>
                    <th scope="col">Date de l'action</th>
                    <th scope="col">IdentificationsNummer</th>
                    <th th:if="${#request.userPrincipal.principal.role.toString()} == 'ROLE_ADMIN'" scope="col">
                        Supression
                    </th>
                </tr>
                </thead>
                <tbody th:remove="all-but-first">
                <tr th:each="finance: ${finances}" th:object="${finance}">
                    <td th:text="*{getBezeichnung()}">Type</td>
                    <td th:text="*{getSumme()}">Somme</td>
                    <td th:text="*{getDescription()}">description</td>
                    <td th:text="*{getGeneratedAt().toLocalDate()}">description</td>
                    <td th:text="*{getId()}">IdentificationsNummer</td>
                    <td th:if="${#request.userPrincipal.principal.role.toString()} == 'ROLE_ADMIN'">
                        <form method="post" th:action="@{/adminindex/finances/delete/{id}(id=*{getId()})}">
                            <input class="btn btn-outline-danger btn-sm fa fa-trash" type="submit" value="Suprimer">
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <!--form method="post" th:action="@{/finances/deleteall}">
            <input class="btn btn-outline-danger btn-sm" type="submit" value="Suprimer tout">
        </form-->
    </div>
    <footer th:replace="fragments/general.html :: footer"></footer>
</div>
</body>
<script>
    function myFunction() {
        var x = document.getElementById("myTopnav");
        if (x.className === "navbar-expand") {
            x.className += "navbar-expand-md";
        } else {
            x.className = "navbar-expand";
        }
    }
</script>
</html>